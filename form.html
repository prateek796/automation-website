<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Step Form - Atlas</title>
    <link rel="stylesheet" href="css/bootstrap.min.css" />
    <link rel="stylesheet" href="css/custom.css" />
    <style>
        .form-step {
            display: none;
        }
        .form-step.active {
            display: block;
        }
        .step-indicator {
            display: flex;
            justify-content: center;
            margin-bottom: 30px;
        }
        .step-circle {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 10px;
            color: #666;
        }
        .step-circle.active {
            background-color: #007bff;
            color: white;
        }
        .step-circle.completed {
            background-color: #28a745;
            color: white;
        }
        .step-line {
            flex-grow: 1;
            height: 2px;
            background-color: #ddd;
            margin-top: 15px;
            max-width: 100px;
        }
        .step-line.active {
            background-color: #007bff;
        }
    </style>
    <!-- Start VWO Async SmartCode -->
    <script type="text/javascript" id="vwoCode">
        // Function to get ID from URL
        function getVWOAccountId() {
            const params = new URLSearchParams(window.location.search);
            const urlId = params.get('id');
            const isSync = window.location.href.includes('sync');
            
            // If URL has an ID parameter, use that
            if (urlId) {
                return urlId;
            }
            // Default ID if none specified
            return '814397';
        }

        if (window.location.href.includes('sync')) {
            var script = document.createElement('script');
            script.type = 'text/javascript';
            script.src = 'https://dev.visualwebsiteoptimizer.com/lib/' + getVWOAccountId() + '.js';
            script.id = 'vwoCode';
            script.referrerPolicy = 'no-referrer-when-downgrade';
            document.head.appendChild(script);
        } else {
            window._vwo_code = window._vwo_code || (function() {
                var account_id = getVWOAccountId(),
                    version = 1.5,
                    settings_tolerance = 2000,
                    library_tolerance = 2500,
                    use_existing_jquery = false,
                    is_spa = 1,
                    hide_element = "body",
                    hide_element_style = "opacity:0 !important;filter:alpha(opacity=0) !important;background:none !important";

                var f = false,
                    d = document,
                    code = {
                        use_existing_jquery: function() { return use_existing_jquery; },
                        library_tolerance: function() { return library_tolerance; },
                        hide_element_style: function() { return "{" + hide_element_style + "}"; },
                        finish: function() {
                            if (!f) {
                                f = true;
                                var e = d.getElementById("_vis_opt_path_hides");
                                if (e) e.parentNode.removeChild(e);
                            }
                        },
                        finished: function() { return f; },
                        load: function(e) {
                            var t = d.createElement("script");
                            t.fetchPriority = "high";
                            t.src = e;
                            t.type = "text/javascript";
                            t.onerror = function() { _vwo_code.finish(); };
                            d.getElementsByTagName("head")[0].appendChild(t);
                        },
                        getVersion: function() { return version; },
                        getMatchedCookies: function(e) {
                            var t = [];
                            if (document.cookie) { t = document.cookie.match(e) || []; }
                            return t;
                        },
                        getCombinationCookie: function() {
                            var e = code.getMatchedCookies(/(?:^|;)\s?(_vis_opt_exp_\d+_combi=[^;$]*)/gi);
                            e = e.map(function(e) {
                                try {
                                    var t = decodeURIComponent(e);
                                    if (!/_vis_opt_exp_\d+_combi=(?:\d+,?)+\s*$/.test(t)) { return ""; }
                                    return t;
                                } catch (e) { return ""; }
                            });
                            var i = [];
                            e.forEach(function(e) {
                                var t = e.match(/([\d,]+)/g);
                                t && i.push(t.join("-"));
                            });
                            return i.join("|");
                        },
                        init: function() {
                            if (d.URL.indexOf("__vwo_disable__") > -1) return;
                            window.settings_timer = setTimeout(function() { _vwo_code.finish(); }, settings_tolerance);
                            var e = d.createElement("style"),
                                t = hide_element ? hide_element + "{" + hide_element_style + "}" : "",
                                i = d.getElementsByTagName("head")[0];
                            e.setAttribute("id", "_vis_opt_path_hides");
                            e.setAttribute("type", "text/css");
                            if (e.styleSheet) e.styleSheet.cssText = t;
                            else e.appendChild(d.createTextNode(t));
                            i.appendChild(e);
                            var n = this.getCombinationCookie();
                            this.load("https://dev.visualwebsiteoptimizer.com/j.php?a=" + account_id + "&u=" + encodeURIComponent(d.URL) + "&f=" + +is_spa + "&vn=" + version + (n ? "&c=" + n : ""));
                            return settings_timer;
                        }
                    };
                window._vwo_settings_timer = code.init();
                return code;
            })();
        }
    </script>
    <!-- End VWO Async SmartCode -->
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar fixed-top" style="background-color: #000000; padding: 10px 20px;">
        <div class="container" style="display: flex; justify-content: space-between; align-items: center;">
            <a class="navbar-brand" href="index.html" style="color: #ffffff; font-size: 24px;">Atlas</a>
            <div style="display: flex; gap: 15px; margin-left: auto;">
                <a href="index.html" class="btn btn-outline-light">Home</a>
                <a href="cars_page.html" class="btn btn-outline-light">Cars</a>
                <a href="products.html" class="btn btn-outline-light">Products</a>
                <a href="services.html" class="btn btn-outline-light">Services</a>
            </div>
        </div>
    </nav>

    <!-- Content with margin-top -->
    <div style="margin-top: 76px;">
        <div class="container">
            <h1 class="text-center mb-4">Multi-Step Form</h1>
            
            <!-- Step Indicator -->
            <div class="step-indicator">
                <div class="step-circle active" data-step="1">1</div>
                <div class="step-line"></div>
                <div class="step-circle" data-step="2">2</div>
                <div class="step-line"></div>
                <div class="step-circle" data-step="3">3</div>
                <div class="step-line"></div>
                <div class="step-circle" data-step="4">4</div>
            </div>

            <!-- Form Steps -->
            <form id="multiStepForm" onsubmit="return false;">
                <!-- Step 1: Personal Information -->
                <div class="form-step active" id="step1">
                    <h3 class="text-center mb-4">Personal Information</h3>
                    <div class="form-group mb-3">
                        <label for="firstName">First Name</label>
                        <input type="text" class="form-control" id="firstName" name="firstName" required>
                        <div class="invalid-feedback">Please enter your first name.</div>
                    </div>
                    <div class="form-group mb-3">
                        <label for="lastName">Last Name</label>
                        <input type="text" class="form-control" id="lastName" name="lastName" required>
                        <div class="invalid-feedback">Please enter your last name.</div>
                    </div>
                    <div class="form-group mb-3">
                        <label for="email">Email</label>
                        <input type="email" class="form-control" id="email" name="email" required>
                        <div class="invalid-feedback">Please enter a valid email address.</div>
                    </div>
                    <div class="text-center">
                        <button type="button" class="btn btn-primary" onclick="validateAndNext(2)">Next</button>
                    </div>
                </div>

                <!-- Step 2: Contact Details -->
                <div class="form-step" id="step2">
                    <h3 class="text-center mb-4">Contact Details</h3>
                    <div class="form-group mb-3">
                        <label for="phone">Phone Number</label>
                        <input type="tel" class="form-control" id="phone" name="phone" required pattern="[0-9]{10}">
                        <div class="invalid-feedback">Please enter a valid 10-digit phone number.</div>
                    </div>
                    <div class="form-group mb-3">
                        <label for="address">Address</label>
                        <textarea class="form-control" id="address" name="address" rows="3" required></textarea>
                        <div class="invalid-feedback">Please enter your address.</div>
                    </div>
                    <div class="text-center">
                        <button type="button" class="btn btn-secondary me-2" onclick="prevStep(1)">Previous</button>
                        <button type="button" class="btn btn-primary" onclick="validateAndNext(3)">Next</button>
                    </div>
                </div>

                <!-- Step 3: Preferences -->
                <div class="form-step" id="step3">
                    <h3 class="text-center mb-4">Preferences</h3>
                    <div class="form-group mb-3">
                        <label>Interests</label>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="interest1" name="interests[]" value="Technology">
                            <label class="form-check-label" for="interest1">Technology</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="interest2" name="interests[]" value="Sports">
                            <label class="form-check-label" for="interest2">Sports</label>
                        </div>
                        <div class="form-check">
                            <input class="form-check-input" type="checkbox" id="interest3" name="interests[]" value="Music">
                            <label class="form-check-label" for="interest3">Music</label>
                        </div>
                    </div>
                    <div class="text-center">
                        <button type="button" class="btn btn-secondary me-2" onclick="prevStep(2)">Previous</button>
                        <button type="button" class="btn btn-primary" onclick="validateAndNext(4)">Next</button>
                    </div>
                </div>

                <!-- Step 4: Confirmation -->
                <div class="form-step" id="step4">
                    <h3 class="text-center mb-4">Confirmation</h3>
                    <div class="alert alert-info">
                        Please review your information before submitting.
                    </div>
                    <div id="summaryContent" class="mb-3">
                        <!-- Summary will be populated by JavaScript -->
                    </div>
                    <div class="text-center">
                        <button type="button" class="btn btn-secondary me-2" onclick="prevStep(3)">Previous</button>
                        <button type="submit" class="btn btn-success" onclick="submitForm()">Submit</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script>
        // Handle hash-based navigation
        function handleHashChange() {
            const hash = window.location.hash || '#step1';
            const step = parseInt(hash.replace('#step', ''));
            showStep(step);
        }

        // Show specific step
        function showStep(step) {
            // Hide all steps
            document.querySelectorAll('.form-step').forEach(el => {
                el.classList.remove('active');
            });
            
            // Show current step
            document.getElementById('step' + step).classList.add('active');
            
            // Update step indicators
            document.querySelectorAll('.step-circle').forEach((circle, index) => {
                if (index + 1 < step) {
                    circle.classList.add('completed');
                    circle.classList.remove('active');
                } else if (index + 1 === step) {
                    circle.classList.add('active');
                    circle.classList.remove('completed');
                } else {
                    circle.classList.remove('active', 'completed');
                }
            });

            // Update step lines
            document.querySelectorAll('.step-line').forEach((line, index) => {
                if (index + 1 < step) {
                    line.classList.add('active');
                } else {
                    line.classList.remove('active');
                }
            });

            // If it's the last step, populate summary
            if (step === 4) {
                populateSummary();
            }

            // Notify VWO about SPA navigation
            if (typeof window._vwo_code !== 'undefined') {
                window._vwo_code.finish();
            }
        }

        // Validate current step and proceed to next
        function validateAndNext(nextStep) {
            const currentStep = document.querySelector('.form-step.active');
            const inputs = currentStep.querySelectorAll('input[required], textarea[required]');
            let isValid = true;

            inputs.forEach(input => {
                if (!input.checkValidity()) {
                    input.classList.add('is-invalid');
                    isValid = false;
                } else {
                    input.classList.remove('is-invalid');
                }
            });

            if (isValid) {
                nextStep(nextStep);
            }
        }

        // Next step navigation
        function nextStep(step) {
            window.location.hash = 'step' + step;
        }

        // Previous step navigation
        function prevStep(step) {
            window.location.hash = 'step' + step;
        }

        // Populate summary in step 4
        function populateSummary() {
            const formData = new FormData(document.getElementById('multiStepForm'));
            const summary = {};
            
            for (const [key, value] of formData.entries()) {
                if (key === 'interests[]') {
                    if (!summary['Interests']) {
                        summary['Interests'] = [];
                    }
                    summary['Interests'].push(value);
                } else {
                    summary[key.charAt(0).toUpperCase() + key.slice(1)] = value;
                }
            }

            let summaryHTML = '<dl class="row">';
            for (const [key, value] of Object.entries(summary)) {
                const displayValue = Array.isArray(value) ? value.join(', ') : value;
                summaryHTML += `
                    <dt class="col-sm-3">${key}:</dt>
                    <dd class="col-sm-9">${displayValue || 'Not provided'}</dd>
                `;
            }
            summaryHTML += '</dl>';

            document.getElementById('summaryContent').innerHTML = summaryHTML;
        }

        // Form submission
        function submitForm() {
            const form = document.getElementById('multiStepForm');
            if (form.checkValidity()) {
                const formData = new FormData(form);
                // Here you would typically send the data to your server
                console.log('Form data:', Object.fromEntries(formData));
                alert('Form submitted successfully!');
                form.reset();
                window.location.hash = 'step1';
            } else {
                form.classList.add('was-validated');
            }
            return false;
        }

        // Listen for hash changes
        window.addEventListener('hashchange', handleHashChange);

        // Initial load
        if (!window.location.hash) {
            window.location.hash = 'step1';
        } else {
            handleHashChange();
        }

        // Preserve query parameters for navigation
        function preserveQueryParams(link) {
            const currentParams = new URLSearchParams(window.location.search);
            const id = currentParams.get('id');
            const isSync = window.location.href.includes('sync');
            
            if (id || isSync) {
                let href = link.getAttribute('href');
                let newUrl = new URL(href, window.location.origin);
                
                if (id) {
                    newUrl.searchParams.set('id', id);
                }
                
                if (isSync) {
                    newUrl.searchParams.set('sync', '');
                }
                
                window.location.href = newUrl.toString();
                return false;
            }
            return true;
        }

        // Add event listeners to navigation links
        document.addEventListener('DOMContentLoaded', function() {
            const navLinks = document.querySelectorAll('a[href$=".html"]');
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    preserveQueryParams(this);
                });
            });
        });

        // Add input validation listeners
        document.addEventListener('DOMContentLoaded', function() {
            const inputs = document.querySelectorAll('input[required], textarea[required]');
            inputs.forEach(input => {
                input.addEventListener('input', function() {
                    if (this.checkValidity()) {
                        this.classList.remove('is-invalid');
                    }
                });
            });
        });
    </script>
</body>
</html> 